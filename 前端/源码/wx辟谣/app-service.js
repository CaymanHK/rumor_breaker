	var __wxAppData = __wxAppData || {}; 	var __wxRoute = __wxRoute || ""; 	var __wxRouteBegin = __wxRouteBegin || ""; 	var __wxAppCode__ = __wxAppCode__ || {};	var global = global || {};	var __WXML_GLOBAL__=__WXML_GLOBAL__ || {};	var __wxAppCurrentFile__=__wxAppCurrentFile__||""; 	var Component = Component || function(){};	var definePlugin = definePlugin || function(){};	var requirePlugin = requirePlugin || function(){};	var Behavior = Behavior || function(){};	var __vd_version_info__ = __vd_version_info__ || {};
	
	define("config.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e={hostname:"https://mp.weixin.qq.com",devHostname:""};module.exports=e; 
 			}); 
		define("libs/request.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,t,i){return e+(e.indexOf("?")>-1?"&":"?")+t+"="+i}function t(e){for(var t=void 0;t=e.shift();)o(t)}function i(e){f={expire:e._sid_expire,sidTicket:e._sid_ticket,dataTicket:e._data_ticket},wx.setStorageSync("app_session",f)}function o(o,s){if(console.log(l),l>=5)y.push(o);else{var n=getApp(),c=o.success,r=o.fail,p=o.complete,_=o.url;/^http/.test(_)||(_=n.hostname+_),_=e(_=e(_,"_sid_ticket",f.sidTicket||""),"_data_ticket",f.dataTicket||""),l++,wx.request({url:_,data:o.data||{},header:o.header||{},method:(o.method||"GET").toUpperCase(),dataType:o.dataType||"json",success:function(e){if(200===e.statusCode){var t=e.data;if(t.base&&t.base.ret===u)i(t.base.session),"function"==typeof s&&s();else if(t.base&&t.base.ret===d&&(i({_sid_expire:0}),o.retry>=0))return void a(o);"function"==typeof c&&c(t)}else"function"==typeof r&&r();console.log("statusCode"),console.log(e.statusCode)},fail:function(){"function"==typeof r&&r()},complete:function(){"function"==typeof p&&p(),l=Math.max(l-1,0),t(y)}})}}function s(){c=!0,r--,wx.login({success:function(i){c=!1;var s=p.shift();s.url=e(s.url,"_code",i.code),o(s,function(){t(p)})},fail:function(){if(c=!1,r)s();else for(var e=void 0;e=p.shift();)"function"==typeof e.fail&&e.fail()}})}function n(){return!!(f.sidTicket&&f.dataTicket&&f.expire&&f.expire>Date.now())||(c||s(),!1)}function a(e){void 0===e.retry&&(e.retry=1),e.retry<0||(e.retry--,n()?o(e):p.push(e))}var c=!1,r=2,f=wx.getStorageSync("app_session")||{expire:0,sidTicket:"",dataTicket:""},u=0,d=200003,p=[],l=0,y=[];module.exports=a; 
 			}); 
		define("main.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict"; 
 			}); 
		define("pages/common.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,t){return e.slice(0,t.length)===t}function t(){var e=wx.getStorageSync("fontsize");return console.log("getFontSizeFromStorage",e),""===e?1:parseInt(e)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={"（":"squeeze","［":"squeeze","〔":"squeeze","【":"squeeze","《":"squeeze","〈":"squeeze","「":"squeeze","『":"squeeze"};module.exports={genArrayKey:function(e,t){return e+"["+t+"]"},simpleJson2EncodedStr:function(e){var t="";for(var n in e)t=t+n+"="+encodeURIComponent(e[n])+"&";return t.substring(0,t.length-1)},toRoman:function(e){if(isNaN(e))return e;for(var t=[["","I","II","III","IV","V","VI","VII","VIII","IX"],["","X","XX","XXX","XL","L","LX","LXX","LXXX","XCC"],["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM"]],n="",o=0,r=0,i=1e3;r<3;r++,i/=10)o=Math.floor(e%i/(i/10)),n+=t[2-r][o];return n},objectIntToString:function(e){for(var t="",n=0;n<e.length;n++){if(n+1<e.length&&":"==e[n]&&'"'==e[n+1]){for(var o=n+2;o<e.length&&('"'!=e[o]||"\\"==e[o-1]);)o++;t+=e.substr(n,o-n+1),n=o+1}n>0&&":"==e[n-1]&&!isNaN(e[n])&&(t+='"'),n>0&&(","==e[n]||"}"==e[n])&&!isNaN(e[n-1])&&(t+='"'),t+=e[n]}return t},modalNotice:function(e){wx.showModal({title:"提示",content:e,showCancel:!1})},toastSuccessNotice:function(e){wx.showToast({title:e,icon:"success",duration:1500})},endsWith:function(e,t){return e.substr(-t.length)===t},isTodayFirstLogin:function(){var e=wx.getStorageSync("login_date");return console.log(void 0===e?"undefined":n(e)),e?(new Date).toDateString()!==e.toDateString()&&(wx.setStorageSync("login_date",new Date),!0):(wx.setStorageSync("login_date",new Date),!0)},splitSentenceToVec:function(e){for(var t=[],n=0,r=0;r<e.length;r++)e[r]in o&&(t.push({content:e.substr(n,r-n),class:""}),t.push({content:e[r],class:o[e[r]]}),n=r+1);return n<e.length&&t.push({content:e.substr(n),class:""}),t},urlToUniqueStr:function(e){var t=e.match(/__biz=([^&]+)/),n=e.match(/mid=([^&]+)/),o=e.match(/idx=([^&]+)/);return t&&n&&o?!(t.length<2||n.length<2||o.length<2)&&t[1]+"_"+n[1]+"_"+o[1]:null},decodeUrlIfNotDecoded:function(e){for(;-1===e.search(":");)e=decodeURIComponent(e);return e},encodeUrlIfNotEncoded:function(e){for(;-1!==e.search(":");)e=encodeURIComponent(e);return e},isMpUrl:function(t){if(console.log("inside mpurl:"+t),!e(t,"https://mp.weixin.qq.com/s?__biz")&&!e(t,"http://mp.weixin.qq.com/s?__biz"))return!1;var n=t.match(/__biz=([^&]+)/),o=t.match(/mid=([^&]+)/),r=t.match(/idx=([^&]+)/);return!!(n&&o&&r)&&!(n.length<2||o.length<2||r.length<2)},changeTime:function(e){return e<=600?"刚刚":e>600&&e<3600?Math.floor(e/60)+"分钟前":e>=3600&&e<86400?Math.floor(e/3600)+"小时前":e>=86400&&e<31536e3?Math.floor(e/86400)+"天前":e>=31536e3?Math.floor(e/31536e3)+"年前":""},deepCopy:function e(t){if(void 0!==t&&null!==t||console.log("in deepCopy! source is",void 0===t?"undefined":n(t)),"object"!==(void 0===t?"undefined":n(t)))return t;var o=new Object;for(var r in t)o[r]="object"===n(t[r])?e(t[r]):t[r];return o},decodeHTMLEntity:function(e){var t="";return e&&e.length&&(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=e.replace(/&nbsp;/g," ")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&apos;/g,"'")).replace(/&#39;/g,"'")).replace(/&amp;/g,"&")).replace(/\\n/g,"\n")).replace(/\\t/g,"\t")).replace(/\\r/g,"\r")),t},changeTimeToDay:function(e){var t=new Date;parseInt(t.valueOf());t.setHours(0),t.setMinutes(0),t.setSeconds(0);var n=parseInt(t.valueOf())/1e3,o=0;return o=e>=n?0:(n-e+86400-1)/86400,0===(o=parseInt(o))?"今天":1===o?"昨天":o+"天前"},getModeFromStorage:function(){var e=wx.getStorageSync("mode");return console.log("getModeFromStorage",e),""===e?1:parseInt(e)},getFontSizeFromStorage:t,getFontStyle:function(e,t,n){var o=.75+.25*e;return"font-size: "+(t=t||32.60869565)*o+"rpx;line-height: "+(n=n||1.5*t)*o+"rpx;"},getFontSizeRatio:function(){return.75+.25*t()}}; 
 			}); 
		define("pages/report.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("common.js"),r=getApp(),t={DEFAULT:0,INDEX_DATA_INVALID:1,VIDEO_DATA_INVALID:2,VIDEO_DATA_FAIL:3};module.exports={error_type:t,reportMMData:function(t,o){var n={};n.friends_read_ticket=wx.getStorageSync("friends_read_ticket"),n.friends_read_openid=wx.getStorageSync("friends_read_openid"),n.errtype=t,n.errmsg=o,wx.request({url:r.global.friendsread_url+"?action=report_mmdata",data:e.simpleJson2EncodedStr(n),method:"POST",success:function(e){},fail:function(){console.log("report fail")},complete:function(){}})}}; 
 			}); 
		define("app.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";App({global:{friendsread_url:"https://mp.weixin.qq.com/wxarumor/msg?action=info",fontMultiple:1,isGivenPerm:0},onLaunch:function(){var l=this;console.log("font!!!!!"),console.log(l),console.log(l.fontMultiple),wx.getSystemInfo({success:function(o){if(o&&o.fontSizeSetting)switch(o.fontSizeSetting){case 17:l.global.fontMultiple=1.06;break;case 19:l.global.fontMultiple=1.1;break;case 23:l.global.fontMultiple=1.4;break;case 26:l.global.fontMultiple=1.6;break;default:l.global.fontMultiple=1}}})}}); 
 			}); 	require("app.js");
 		__wxRoute = 'pages/index/index';__wxRouteBegin = true; 	define("pages/index/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=require("../../libs/request"),e=getApp();Page({data:{search_category:0,new_rumor:[],searing:!1,search_val:"",search_rumor_list:[],search_rumor_total:0,searched:!1,startsearchAnimatData:{},showsearchAnimatData:{},initial:!0,startsearch:!1,fontMultiple:e.global.fontMultiple,monitorSrc:e.global.fontMultiple>1?"https://mp.weixin.qq.com/mp/jsmonitor?idkey=67324_126_1&t="+Math.random():"https://mp.weixin.qq.com/mp/jsmonitor?idkey=67324_125_1&t="+Math.random()},onLoad:function(){this.loaddata()},loaddata:function(){function e(e){t({url:"https://mp.weixin.qq.com/wxarumor/rumor?action=report_auth&allow="+(e=e?1:0),method:"post",data:{action:"report_auth",allow:e},success:function(t){console.log("Auth 返回数据："),console.log(t)}})}var a=this,r=void 0;a.setData({new_rumor:[],initial:!0}),r=wx.getStorageSync("isGivenPerm"),console.log(r),1!=parseInt(r)&&2!=parseInt(r)&&wx.showModal({title:"提示",content:"“微信辟谣助手”里“与我相关”页面会读取你阅读过的文章，有辟谣时会进行提醒，是否允许？",confirmText:"允许",cancelText:"不允许",success:function(t){var a=0;t.confirm?(a=2,e(!0),console.log("test1")):t.cancel&&(a=1,e(!1),console.log("test2")),wx.setStorage({key:"isGivenPerm",data:a,success:function(){console.log("数据缓存成功")}})}}),t({url:"https://mp.weixin.qq.com/wxarumor/home?category="+a.data.search_category,success:function(t){if(console.log("https://mp.weixin.qq.com/wxarumor/home返回数据："),console.log(t),t.latest_rumor&&t.latest_rumor.item){for(var e=0;e<t.latest_rumor.item.length;e++){var r=new Date(1e3*t.latest_rumor.item[e].refute_time);t.latest_rumor.item[e].refute_time=r.getFullYear()+"-"+(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1)+"-"+(r.getDate()<10?"0"+r.getDate():r.getDate()),console.log("res.latest_rumor.item[i]:"),console.log(t.latest_rumor.item[e])}a.setData({new_rumor:t.latest_rumor.item,initial:!1})}else a.setData({initial:!1})},fail:function(t){},complete:function(t){}})},checkcategory:function(t){this.setData({search_category:t.currentTarget.dataset.value}),this.loaddata()},onShareAppMessage:function(){return{title:"谣言识别",path:"/pages/index/index"}},showmiddle:function(t){console.log(t),wx.navigateTo({url:"../middle/middle?bizuin="+t.currentTarget.dataset.bizuin+"&msgid="+t.currentTarget.dataset.msgid+"&idx="+t.currentTarget.dataset.idx+"&saferefuteurl="+t.currentTarget.dataset.saferefuteurl})},startsearch:function(t){if(!this.data.searing){var e=wx.createAnimation({duration:200,timingFunction:"ease"});this.animation=e,e.translateY(-200).opacity(0).step(),this.setData({startsearchAnimatData:e.export()}),setTimeout(function(){e.translate(30).step(),this.setData({startsearchAnimatData:e.export(),searing:!0});var t=wx.createAnimation({duration:200,timingFunction:"ease"});this.animation2=t,t.opacity(1).step(),this.setData({showsearchAnimatData:t.export()}),setTimeout(function(){this.setData({showsearchAnimatData:t.export(),searing:!0})}.bind(this),200)}.bind(this),150)}},cancelsearch:function(t){if(this.data.searing){var e=wx.createAnimation({duration:300,timingFunction:"ease"}),a=wx.createAnimation({duration:300,timingFunction:"ease"});this.animation=e,this.animation2=a,e.translateY(0).opacity(1).step(),a.opacity(0).step(),this.setData({startsearchAnimatData:e.export(),showsearchAnimatData:a.export()}),this.setData({searing:!1,searched:!1,search_rumor_list:[],search_val:""})}},searchseg:function(t){this.setData({search_val:t.detail.value}),""==t.detail.value&&this.setData({search_rumor_list:[]})},searchlist:function(e){var a=this.data.search_val.replace(/(^\s*)|(\s*$)/g,"");if(a){var r=this;r.setData({startsearch:!0}),t({url:"https://mp.weixin.qq.com/wxarumor/search",data:{action:"search",query:a,page:1,num:100},success:function(t){if(console.log("https://mp.weixin.qq.com/wxarumor/search返回数据："),console.log(t),t&&t.rumor_list){for(var e=0;e<t.rumor_list.length;e++){var a=new Date(1e3*t.rumor_list[e].refute_time);t.rumor_list[e].refute_time=a.getFullYear()+"-"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-"+(a.getDate()<10?"0"+a.getDate():a.getDate())}r.setData({search_rumor_list:t.rumor_list,search_rumor_total:t.total_count>100?100:t.total_count,searched:!0}),r.setData({startsearch:!1})}}})}},openrumor:function(t){t.currentTarget.dataset.saferefuteurl?wx.navigateTo({url:"../middle/middle?saferefuteurl="+encodeURIComponent(t.currentTarget.dataset.saferefuteurl)}):wx.navigateTo({url:"../middle/middle?bizuin="+t.currentTarget.dataset.bizuin+"&msgid="+t.currentTarget.dataset.msgid+"&idx="+t.currentTarget.dataset.idx})},deleteword:function(){this.data.searing&&this.setData({searched:!1,searing:!0,search_rumor_list:[],search_val:""})}}); 
 			}); 	require("pages/index/index.js");
 		__wxRoute = 'pages/mine/mine';__wxRouteBegin = true; 	define("pages/mine/mine.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=require("../../libs/request"),e=getApp();Page({data:{nick_name:"",head_img:"/images/rumor-default-headimg.jpg",my_rumor:[],my_total:0,initial:!0,unsubscribe:0,fontMultiple:e.global.fontMultiple,isGivenPerm:0,links:[{name:"div",attrs:{style:"color: #4183c4;"},children:[{type:"text",text:"可点击允许"}]}]},onLoad:function(e){var o=this,r={per_page:100,page:1};e&&e.source&&(r.source=e.source);var i=wx.getStorageSync("isGivenPerm");console.log("isGivenPerm",i),2!=parseInt(i)&&(i=1),o.setData({isGivenPerm:parseInt(i)}),2==parseInt(i)&&t({url:"https://mp.weixin.qq.com/wxarumor/rumor",data:r,success:function(t){if(console.log("https://mp.weixin.qq.com/wxarumor/rumor返回数据："),console.log(t),t.rumor_list&&t.rumor_list.rumor_info_list){for(var e=0;e<t.rumor_list.rumor_info_list.length;e++){var r=new Date(1e3*t.rumor_list.rumor_info_list[e].refute_time);t.rumor_list.rumor_info_list[e].refute_time=r.getFullYear()+"-"+(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1)+"-"+(r.getDate()<10?"0"+r.getDate():r.getDate())}console.log("total:"),console.log(t.rumor_list.total),o.setData({nick_name:t.nick_name,head_img:t.head_img||"/images/rumor-default-headimg.jpg",my_rumor:t.rumor_list.rumor_info_list,my_total:t.rumor_list.total||0,unsubscribe:t.rumor_list.unsubscribe||0,initial:!1})}else o.setData({initial:!1})}})},onShareAppMessage:function(){return{title:"我看过的谣言",path:"/pages/mine/mine"}},showPerm:function(){function e(e,o){t({url:"https://mp.weixin.qq.com/wxarumor/rumor?action=report_auth&allow="+(e=e?1:0),method:"post",data:{action:"report_auth",allow:e},success:function(t){console.log("Auth 返回数据："),console.log(t),o()}})}var o=this;wx.showModal({title:"提示",content:"“微信辟谣助手”里“与我相关”页面会读取你阅读过的文章，有辟谣时会进行提醒，是否允许？",confirmText:"允许",cancelText:"不允许",success:function(t){function r(){wx.setStorage({key:"isGivenPerm",data:i,success:function(){2==i&&o.onLoad(),console.log("数据缓存成功")}})}var i=0;t.confirm?(i=2,e(!0,r)):t.cancel&&(i=1,e(!1,r)),console.log("after report")}})},openrumor:function(t){wx.navigateTo({url:"../middle/middle?bizuin="+t.currentTarget.dataset.bizuin+"&msgid="+t.currentTarget.dataset.msgid+"&idx="+t.currentTarget.dataset.idx+"&saferefuteurl="+t.currentTarget.dataset.saferefuteurl})},goindex:function(){wx.switchTab({url:"/pages/index/index"})},setsub:function(e){var o=this,r=e.currentTarget.dataset.flag;t({url:"https://mp.weixin.qq.com/wxarumor/rumor?action=update_unsubscribe&flag="+r,method:"POST",success:function(t){o.setData({unsubscribe:-r})}})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){}}); 
 			}); 	require("pages/mine/mine.js");
 		__wxRoute = 'pages/organization/organization';__wxRouteBegin = true; 	define("pages/organization/organization.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=require("../../libs/request"),a=getApp();Page({data:{rumor_count:0,pv:0,org_list:[],category:0,categoryArray:["部分","健康类","社会事件类"],initial:!0,fontMultiple:a.global.fontMultiple},onLoad:function(t){this.getCategoryData(this.category)},onShareAppMessage:function(){return{title:"辟谣机构",path:"/pages/organization/organization"}},getCategoryData:function(a){var o=this;t({url:"https://mp.weixin.qq.com/wxarumor/refute?action=list",data:{category:a},success:function(t){console.log("https://mp.weixin.qq.com/wxarumor/refute?action=list返回数据："),console.log(t),t.rumor_org&&t.rumor_org?o.setData({org_list:t.rumor_org,initial:!1}):o.setData({initial:!1}),t.rumor_stat?o.setData({rumor_count:t.rumor_stat.rumor_count||0,pv:t.rumor_stat.pv||0,initial:!1}):o.setData({initial:!1})}})},categoryPickerChange:function(t){console.log("picker发送选择改变，携带值为",t.detail.value),this.setData({category:t.detail.value}),this.getCategoryData(this.data.category)},showpartner:function(t){console.log(t),wx.navigateTo({url:"../partner/partner?uin="+t.currentTarget.dataset.uin})},howjoin:function(t){wx.navigateTo({url:"../detailsimple/detailsimple?bizuin=2394001060&msgid=221870135&idx=1"})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){}}); 
 			}); 	require("pages/organization/organization.js");
 		__wxRoute = 'pages/partner/partner';__wxRouteBegin = true; 	define("pages/partner/partner.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=require("../../libs/request"),e=getApp();Page({data:{nick_name:"",head_img:"",signature:"",refute_count:0,rumor_list:[],initial:!0,fontMultiple:e.global.fontMultiple},onLoad:function(e){var r=this;t({url:"https://mp.weixin.qq.com/wxarumor/refute?action=detail",data:{bizuin:e.uin},success:function(t){if(console.log(t),t&&t.rumor_info&&t.rumor_info.rumor_list&&t.rumor_info.rumor_list.item){for(var e=0;e<t.rumor_info.rumor_list.item.length;e++){var i=new Date(1e3*t.rumor_info.rumor_list.item[e].refute_time);t.rumor_info.rumor_list.item[e].refute_time=i.getFullYear()+"年"+(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"月"+(i.getDate()<10?"0"+i.getDate():i.getDate())+"日"}r.setData({rumor_list:t.rumor_info.rumor_list.item,initial:!1})}t&&t.rumor_info&&r.setData({nick_name:t.rumor_info.nick_name||"",head_img:t.rumor_info.head_img||"/images/rumor-default-headimg.jpg",signature:t.rumor_info.signature||"",refute_count:t.rumor_info.refute_count||0,initial:!1})}}),wx.showShareMenu({withShareTicket:!0})},openrumor:function(t){wx.navigateTo({url:"../middle/middle?bizuin="+t.currentTarget.dataset.bizuin+"&msgid="+t.currentTarget.dataset.msgid+"&idx="+t.currentTarget.dataset.idx+"&saferefuteurl="+t.currentTarget.dataset.saferefuteurl})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){}}); 
 			}); 	require("pages/partner/partner.js");
 		__wxRoute = 'pages/middle/middle';__wxRouteBegin = true; 	define("pages/middle/middle.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("../../libs/request"),t=getApp();console.log("app!!!:"),console.log(t),Page({data:{middle_data:{},initial:!0,fontMultiple:t.global.fontMultiple,webViewUrl:"",useWv:wx.canIUse("web-view")},onLoad:function(t){console.log(t);var i=this,r={action:"info",source:t.source};"undefined"!=String(t.saferefuteurl)?r.safe_refute_url=decodeURIComponent(t.saferefuteurl):"undefined"!=t.bizuin&&"undefined"!=t.msgid&&"undefined"!=t.idx&&(r.rumor_uin=t.bizuin,r.rumor_msgid=t.msgid,r.rumor_idx=t.idx),e({url:"https://mp.weixin.qq.com/wxarumor/mid",data:r,success:function(e){console.log("https://mp.weixin.qq.com/wxarumor/mid返回数据："),console.log(e),e&&e.rumor_digest&&(e.rumor_digest=e.rumor_digest.replace(/\&nbsp\;/g," ")),i.setData({middle_data:e,initial:!1}),e&&e.video_ckey&&e.rumor_vid&&wx.request({raw:!0,url:"https://h5vv.video.qq.com/getvinfo",data:{vid:e.rumor_vid,dtype:1,otype:"json",callback:"data",appVer:1,encryptVer:6.3,platform:61001,cKey:e.video_ckey,stdfrom:"v3060",device:60401},success:function(t){console.log("getVideo success");var r=JSON.parse(t.data.slice(5,-1));if(console.log(r),!r.em){var a=r.vl.vi[0],n=a.ul.ui[0].url+a.fn+"?vkey="+a.fvkey+"&br="+a.br+"&fmt=auto&level="+a.level;console.log(n),e.rumor_video=n,i.setData({middle_data:e})}}})}}),wx.showShareMenu({withShareTicket:!0})},goindex:function(){wx.switchTab({url:"/pages/index/index"})},gorumor:function(e){e.currentTarget.dataset.bizuin&&String(e.currentTarget.dataset.msgid)&&String(e.currentTarget.dataset.idx)&&(this.setData({webViewUrl:""}),wx.navigateTo({url:"../detailsimple/detailsimple?bizuin="+e.currentTarget.dataset.bizuin+"&msgid="+e.currentTarget.dataset.msgid+"&idx="+e.currentTarget.dataset.idx}))},gorefute:function(e){this.setData({webViewUrl:""}),wx.navigateTo({url:"../detailsimple/detailsimple?bizuin="+e.currentTarget.dataset.bizuin+"&msgid="+e.currentTarget.dataset.msgid+"&idx="+e.currentTarget.dataset.idx})},goorganization:function(e){wx.navigateTo({url:"../partner/partner?uin="+e.currentTarget.dataset.uin})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){}}); 
 			}); 	require("pages/middle/middle.js");
 		__wxRoute = 'pages/detailsimple/detailsimple';__wxRouteBegin = true; 	define("pages/detailsimple/detailsimple.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=require("../common.js"),i=(require("../report.js"),require("../../libs/request")),a=getApp(),s=a.global.debug;Page({data:{windowHeight:a.global.windowHeight,scrollTop:0,getRelateArticleTime:0,msg:{},biz_info:{},getJsonSucc:!0,renderJsonSucc:!1,debug:"",listData:[],del_flag:0,enum:{MAIN_BODY:0,PHOTO:1,VIDEO:2,AUDIO:3},r_detail_source_degree:0,mode:1,fontMultiple:a.global.fontMultiple},report:{url:"",title:"",start:0,end:0,screenHeight:0,screenWidth:0,imgCnt:0,videoCnt:0,publishTime:0,friends_read_ticket:"",friends_read_openid:"",frompage:""},audioCtx:{},videoCtx:{},onShareAppMessage:function(){var t="/pages/detailsimple/detailsimple?bizuin="+this.bizuin+"&msgid="+this.msgid+"&idx="+this.idx;return console.log("分享文章",t),{title:this.data.msg.title,desc:"分享文章",path:t}},article_encoded_url:"",isCollect:!1,onLoad:function(t){this.bizuin=t.bizuin,this.msgid=t.msgid,this.idx=t.idx,console.log("onload parameters",t),s&&console.time("onLoad");var i=getApp(),a=this;if(this.report.frompage=t.frompage,console.log("frompage",t.frompage),t.frompage&&"recommend"===t.frompage&&(this.report.extend=decodeURIComponent(t.extend),this.report.sessionid=t.sessionid,this.report.seq=t.seq),t.frompage&&t.pageidx&&t.articleidx&&"collection"==t.frompage){var o={};o.aidx=parseInt(t.articleidx),o.pidx=parseInt(t.pageidx),o.cancel=!1,a.setData({collection_info:o})}var n=e.getModeFromStorage();a.setData({mode:n}),console.log("mode",n);this.setData({loginSucc:!0}),this.getJson(i.global.friendsread_url),console.log("detail?url="+this.url),console.timeEnd("onLoad")},onShow:function(t){this.setData({ratio:e.getFontSizeRatio()})},onReady:function(){var t=this;wx.getSystemInfo({success:function(e){t.data.windowHeight=e.windowHeight,t.data.windowWidth=e.windowWidth,console.log("windowHeight:"+t.data.windowHeight),t.setData({windowHeight:t.data.windowHeight})}});var i=Date.now();console.log("onReady called: "+i),console.log("Loading time: "+(i-this.report.start)+"ms"),this.data.request=this.gotJson-this.report.start,this.data.render=i-this.gotJson,console.log("request="+this.data.request+";render="+this.data.render);var a=this.report.url.match(/__biz=([^&]+)/);a&&(console.log("set bizcode",a[1]),this.setData({__biz:encodeURIComponent(a[1])}));var s=e.urlToUniqueStr(this.report.url);s||console.log("err: urlToUniqueStr fail. url: ",this.report.url),wx.getStorage({key:"read_status_detailsimple",success:function(e){console.log("read_status_detailsimple",e.data[s]||0),console.log("read_status_detailsimple",e.data.expired),e.data.expired>=i&&t.setData({scrollTop:e.data[s]||0})}})},onUnload:function(){},getJson:function(e){s&&console.time("getJson"),console.log("getJson called "+e);var a=this;wx.showNavigationBarLoading(),i({url:e,data:{bizuin:this.bizuin,msgid:this.msgid,idx:this.idx},success:function(i){console.log("getJson success"),i.detail&&i.detail.title?(a.msg=i.detail,a.setData({del_flag:i.del_flag||"0"}),wx.setNavigationBarTitle({title:1==i.is_rumor?"谣言文章":i.detail.source_name,success:function(){console.log("set navigationbar title succeed")},fail:function(){console.log("set navigationbar title failed")}}),"object"!==t(a.msg.list)&&(a.msg.list=JSON.parse(a.msg.list)),console.log(a.msg.list),a.procMsg()):a.setData({del_flag:i.del_flag||"0",msg:i.detail,url:e,getJsonSucc:!1})},fail:function(){console.log("getJson failed"),a.setData({getJsonSucc:!1})},complete:function(){console.log("getJson completed "+Date.now()),a.gotJson=Date.now(),wx.hideNavigationBarLoading(),console.timeEnd("getJson")}})},timeToString:function(t){var e=new Date(1e3*t);return(new Date).getFullYear()!=e.getFullYear()?e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日":e.getMonth()+1+"月"+e.getDate()+"日"},procMsg:function(){s&&console.time("procMsg"),console.log("procMsg called"),this.msgProcessed=!1,this.videoNum=0,this.videoProcessed=0,this.procMeta(this.msg),s&&console.time("traverse"),this.traverse(this.msg.list,null),console.log("!!!!!",this.msg.list),s&&console.timeEnd("traverse"),this.handleInline(this.data.listData),console.log("after handleInline",this.data.listData),this.msgProcessed=!0,s&&console.timeEnd("procMsg"),this.showMsg()},handleInline:function(t){for(var e=new Array,i=0;i<t.length;i++)if(t[i].type==this.data.enum.MAIN_BODY){for(var a={type:this.data.enum.MAIN_BODY,list:[]},s=i;s<t.length&&1==t[s].is_inline&&t[s].type==this.data.enum.MAIN_BODY;){a.list.push(t[s]);for(var o in t[s]){n=t[s][o];o in a?"string"==typeof a[o]?(a[o]+=a[o].length>0?" ":"",a[o]+=n):a[o]=n:"content"==o||"type"==o||"href"==o||"encode_href"==o||"data_ue_src"==o||(a[o]=n)}s++}if(t[s]&&0==t[s].is_inline&&t[s].type==this.data.enum.MAIN_BODY){a.list.push(t[s]);for(var o in t[s]){var n=t[s][o];o in a?"string"==typeof a[o]?(a[o]+=a[o].length>0?" ":"",a[o]+=n):a[o]=n:"content"==o||"type"==o||"href"==o||"encode_href"==o||"data_ue_src"==o||(a[o]=n)}s++}if(i=s-1,0===a.list.length)continue;if(1===a.list.length&&1===a.list[0].content.length){var r=a.list[0].content[0];if(""==r.content.trim()||0==r.content.trim().length)continue;if(" "==r.content)continue;if(0==this.ltrim(r.content).length)continue}e.push(a)}else e.push(t[i]);delete this.data.listData,this.data.listData=e;for(i=0;i<this.data.listData.length;i++)this.data.listData[i].type==this.data.enum.VIDEO?this.handleVideo(this.data.listData[i],i):this.data.listData[i].type==this.data.enum.AUDIO&&(this.data.listData[i].audioid="audio-"+i,this.data.listData[i].currentTime=this.timestampToStr(parseInt(this.data.listData[i].play_length)/1e3),this.data.listData[i].isPlay=!1,this.audioCtx[this.data.listData[i].audioid]={ctx:{},ext:{index:i,currentTime:this.timestampToStr(parseInt(this.data.listData[i].play_length)/1e3),isPlay:!1}})},showMsg:function(){console.log("showMsg!"),s&&console.time("showMsg");var t=0;0==this.report.videoCnt&&(t=1),this.msgProcessed?(this.setData({msg:this.msg,getJsonSucc:!0,debug:"debug"}),this.setData({listData:this.data.listData,useScrollView:t}),this.setData({renderJsonSucc:!0})):console.log("showMsg error.",this.msgProcessed,this.videoNum,this.videoProcessed),this.handleAudioCtx(),s&&console.timeEnd("showMsg")},procMeta:function(t){if(t.create_time){var e=new Date(1e3*t.create_time);t.pubtime=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t.time=" · "+this.timeToString(t.create_time)}if(t.audit_stat)switch(t.audit_stat){case 11:case 100:t.copyright="原创";break;case 12:case 101:case 201:t.copyright="转载"}},handleAudioCtx:function(){console.log("handleAudioCtx",this.audioCtx);for(var t in this.audioCtx)try{this.audioCtx[t].ctx=wx.createAudioContext(t)}catch(t){console.log("handleAudioCtx",t)}},ctrlSound:function(t){console.log(t);var i=t.currentTarget.dataset.id;i in this.audioCtx||(console.log("err: id not in this.audioCtx.",i,this.audioCtx),this.audioCtx[i]=wx.createAudioContext(i));var a=this.audioCtx[i],s=a.ctx;a.ext.isPlay?s.pause():s.play(),a.ext.isPlay=!a.ext.isPlay;var o=e.genArrayKey("listData",a.ext.index),n={};n[o+=".isPlay"]=a.ext.isPlay,this.setData(n)},updateAudio:function(t){var i=t.currentTarget.dataset.id;i in this.audioCtx||(console.log("err: id not in this.audioCtx.",i,this.audioCtx),this.audioCtx[i]=wx.createAudioContext(i));var a=this.audioCtx[i];a.ext.currentTime=this.timestampToStr(parseInt(t.detail.currentTime));var s={},o=e.genArrayKey("listData",a.ext.index);s[o+=".currentTime"]=a.ext.currentTime,this.setData(s)},timestampToStr:function(t){var e=parseInt(t),i=parseInt(e/3600);e%=3600;var a=parseInt(e/60),s=parseInt(e%60);return(i>0?i+":":"")+a+":"+(s<10?"0":"")+s},isInline:function(t){var e=-1!==["b","big","i","small","tt","abbr","acronym","cite","code","dfn","em","kbd","strong","samp","var","a","bdo","img","map","object","q","script","span","sub","sup","button","input","label","select","textarea","text"].indexOf(t.tag);return"display"in t.attr.style&&(e=e||-1!==t.attr.style.display.indexOf("inline")),e},decodeHTMLEntity:function(t){var e="";return t&&t.length&&(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.replace(/&nbsp;/g," ")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&apos;/g,"'")).replace(/&#39;/g,"'")).replace(/&amp;/g,"&")).replace(/\\n/g,"\n")).replace(/\\t/g,"\t")).replace(/\\r/g,"\r")),e},decodeValue:function(t){t.value&&(t.value=this.decodeHTMLEntity(t.value))},ltrim:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" 　";for(var i in t)if(-1===e.indexOf(t[i]))return t.substr(i);return t},traverse:function(t,i){var a=t.length;console.log("in traverse",this.msg);for(var s in t){var o=t[s];if(void 0!=o.href&&(o.href=this.decodeHTMLEntity(o.href),e.isMpUrl&&!e.isMpUrl(o.href)?o.href=void 0:o.encode_href=encodeURIComponent(o.href)),o.type==this.data.enum.PHOTO){parseFloat(o.width);o.width="80%",o.height="inherit",this.data.listData.push(o)}else if(o.type==this.data.enum.MAIN_BODY)o.content=this.decodeHTMLEntity(o.content),this.data.listData.length>0&&(t[s-1].type!=this.data.enum.PHOTO&&t[s-1].type!=this.data.enum.AUDIO&&t[s-1].type!=this.data.enum.VIDEO||(o.marginMore="main-body_pt")),s==a-1&&(o.marginMore?o.marginBottom+=" main-body_last":o.marginBottom="main-body_last"),o.content=e.splitSentenceToVec(o.content),this.data.listData.push(o);else if(o.type==this.data.enum.AUDIO){o.music_name?(o.name=o.music_name,o.author=o.singer,o.poster="https://imgcache.qq.com/music/photo/mid_album_68"+o.albumurl,o.src=o.audiourl,o.isVoice=!1):(o.poster="data:image/png;base64,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",o.src="http://res.wx.qq.com/voice/getvoice?mediaid="+o.voice_encode_fileid,o.author="来自"+this.msg.source_name,o.isVoice=!0),o.name=this.decodeHTMLEntity(decodeURIComponent(o.name)),o.author=this.decodeHTMLEntity(decodeURIComponent(o.author));this.data.listData.length;s==a-1&&(o.marginMore?o.marginMore+=" fake-audio_last":o.marginMore="fake-audio_last"),this.data.listData.push(o)}else if(o.type==this.data.enum.VIDEO){if(o["data-src"]&&o["data-src"].match(/appmsgvote/))return;this.videoNum++,this.report.videoCnt++;this.data.listData.length;s==a-1&&(o.marginMore?o.marginMore+=" video_last":o.marginMore="video_last"),this.data.listData.push(o)}else this.data.listData.push(o)}},handleVideo:function(t,e){if(t.class&&t.class.match(/video_small_iframe/))t.src=t["video-src"];else if(t.class&&t.class.match(/video_iframe/)||t["data-src"]&&t["data-src"].match(/v\.qq\.com/)||t.src&&t.src.match(/v\.qq\.com/)){var i=t["data-src"]?t["data-src"]:t.src;if(i){var a=this,s="",o=i.match(/vid=([0-9a-zA-Z]*)/);o&&(s=o[1]);var n=t.CKey;console.log("vid="+s),console.log("ckey="+n),wx.request({raw:!0,url:"https://h5vv.video.qq.com/getvinfo",data:{vid:s,dtype:1,otype:"json",callback:"data",appVer:1,encryptVer:6.3,platform:61001,cKey:n,stdfrom:"v3060",device:60401},success:function(i){console.log("getVideo success");var s=JSON.parse(i.data.slice(5,-1));console.log(s);var o={},n="listData["+e+"]";if(!s.em){var r=s.vl.vi[0],l=r.ul.ui[0].url+r.fn+"?vkey="+r.fvkey+"&br="+r.br+"&fmt=auto&level="+r.level;console.log(l),t.src=l,o[n]=t,a.setData(o)}}})}}},upper:function(t){},lower:function(t){},scroll:function(t){var i=e.urlToUniqueStr(this.report.url);if(i){var a={};a[i]=t.detail.scrollTop,a.expired=Date.now()+3e5,wx.setStorage({key:"read_status_detailsimple",data:a})}else console.log("err: urlToUniqueStr fail. url: ",this.report.url)}}); 
 			}); 	require("pages/detailsimple/detailsimple.js");
 	